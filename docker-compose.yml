version: '3.8'

services:
  ninoai:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: ninoai-bot
    environment:
      - DISCORD_TOKEN=${DISCORD_TOKEN}
      - CEREBRAS_API_KEY=${CEREBRAS_API_KEY}
      - EMBEDDING_API_URL=${EMBEDDING_API_URL:-https://vector.mishl.dev/embed}
      - EMBEDDING_API_KEY=${EMBEDDING_API_KEY}
      - SURREAL_DB_HOST=${SURREAL_DB_HOST}
      - SURREAL_DB_USER=${SURREAL_DB_USER}
      - SURREAL_DB_PASS=${SURREAL_DB_PASS}
    volumes:
      - ./storage:/app/storage
    restart: unless-stopped
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    networks:
      - ninoai-network

networks:
  ninoai-network:
    driver: bridge
